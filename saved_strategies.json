{
  "Poseidon": {
    "name": "Poseidon",
    "code": "//@version=5\nindicator(\"Cruzamento EMA + Variação % - By Gemini\", shorttitle=\"Crossover EMA + Var %\", overlay=true)\n\n// --- Entradas do Usuário ---\nshow_trade_labels = input.bool(true, title=\"Exibir Etiquetas de COMPRA/VENDA\")\n\n// --- Entradas e Cálculos das EMAs ---\nfast_length = 5\nslow_length = 200\nema_fast = ta.ema(close, fast_length)\nema_slow = ta.ema(close, slow_length)\n\n// --- Plotagem das EMAs ---\nplot(ema_fast, color=color.new(color.blue, 0), title=\"EMA 5\")\nplot(ema_slow, color=color.new(color.orange, 0), title=\"EMA 200\")\n\n// --- Condições de Cruzamento ---\nbuy_signal = ta.crossover(ema_fast, ema_slow)\nsell_signal = ta.crossunder(ema_fast, ema_slow)\n\n// --- Variáveis para rastrear estado, preços e localização no gráfico ---\nvar trade_direction = 0 // 0=neutro, 1=compra, -1=venda\nvar float entry_price = na\nvar float extreme_price = na\nvar int extreme_bar_index = na\n\n// --- Lógica para Calcular e Plotar a Variação ---\n\n// Ocorre um sinal de VENDA\nif sell_signal\n    if trade_direction == 1\n        variation_up = ((extreme_price - entry_price) / entry_price) * 100\n        label_text_up = \"Máx: +\" + str.tostring(variation_up, \"#.##\") + \"%\"\n        label.new(extreme_bar_index, extreme_price, label_text_up,\n                  color=color.new(color.teal, 40), textcolor=color.white,\n                  style=label.style_label_down)\n\n    trade_direction := -1\n    entry_price := close\n    extreme_price := low\n    extreme_bar_index := bar_index\n    if show_trade_labels\n        label.new(bar_index, high, \"VENDA\", color=color.new(color.red, 20), textcolor=color.white, style=label.style_label_down, yloc=yloc.abovebar)\n\n// Ocorre um sinal de COMPRA\nif buy_signal\n    if trade_direction == -1\n        variation_down = ((extreme_price - entry_price) / entry_price) * 100\n        label_text_down = \"Mín: \" + str.tostring(variation_down, \"#.##\") + \"%\"\n        label.new(extreme_bar_index, extreme_price, label_text_down,\n                  color=color.new(color.maroon, 40), textcolor=color.white,\n                  style=label.style_label_up)\n\n    trade_direction := 1\n    entry_price := close\n    extreme_price := high\n    extreme_bar_index := bar_index\n    if show_trade_labels\n        label.new(bar_index, low, \"COMPRA\", color=color.new(color.green, 20), textcolor=color.white, style=label.style_label_up, yloc=yloc.belowbar)\n\n// --- Rastreia os preços extremos entre os sinais ---\nif trade_direction == 1 and high > extreme_price\n    extreme_price := high\n    extreme_bar_index := bar_index\n\nif trade_direction == -1 and low < extreme_price\n    extreme_price := low\n    extreme_bar_index := bar_index\n\n// --- Alertas ---\n// NOVIDADE: Adiciona as condições de compra e venda aos alertas do TradingView\nalertcondition(buy_signal, title=\"Sinal de Compra\", message=\"Cruzamento de EMAs: Sinal de COMPRA no {{ticker}}\")\nalertcondition(sell_signal, title=\"Sinal de Venda\", message=\"Cruzamento de EMAs: Sinal de VENDA no {{ticker}}\")",
    "params": {},
    "created_at": "2026-01-03T16:39:32.458296",
    "updated_at": "2026-01-03T16:39:32.458307"
  },
  "Nova_estrategia": {
    "name": "Nova_estrategia",
    "code": "//@version=4\nstudy(title=\"UT Bot Alerts - Com Entrada\", overlay = true)\n\n// Inputs\na = input(1,     title = \"Key Vaule. 'This changes the sensitivity'\")\nc = input(10,    title = \"ATR Period\")\nh = input(false, title = \"Signals from Heikin Ashi Candles\")\n\nxATR  = atr(c)\nnLoss = a * xATR\n\nsrc = h ? security(heikinashi(syminfo.tickerid), timeframe.period, close, lookahead = false) : close\n\nxATRTrailingStop = 0.0\nxATRTrailingStop := iff(src > nz(xATRTrailingStop[1], 0) and src[1] > nz(xATRTrailingStop[1], 0), max(nz(xATRTrailingStop[1]), src - nLoss),\n   iff(src < nz(xATRTrailingStop[1], 0) and src[1] < nz(xATRTrailingStop[1], 0), min(nz(xATRTrailingStop[1]), src + nLoss), \n   iff(src > nz(xATRTrailingStop[1], 0), src - nLoss, src + nLoss)))\n \npos = 0   \npos :=   iff(src[1] < nz(xATRTrailingStop[1], 0) and src > nz(xATRTrailingStop[1], 0), 1,\n   iff(src[1] > nz(xATRTrailingStop[1], 0) and src < nz(xATRTrailingStop[1], 0), -1, nz(pos[1], 0))) \n   \nxcolor = pos == -1 ? color.red: pos == 1 ? color.green : color.blue \n\nema   = ema(src,1)\nabove = crossover(ema, xATRTrailingStop)\nbelow = crossover(xATRTrailingStop, ema)\n\nbuy  = src > xATRTrailingStop and above \nsell = src < xATRTrailingStop and below\n\nbarbuy  = src > xATRTrailingStop \nbarsell = src < xATRTrailingStop \n\n// --- PLOTAGEM ORIGINAL DOS SINAIS ---\nplotshape(buy,  title = \"Buy\",  text = 'Buy',  style = shape.labelup,   location = location.belowbar, color= color.green, textcolor = color.white, transp = 0, size = size.tiny)\nplotshape(sell, title = \"Sell\", text = 'Sell', style = shape.labeldown, location = location.abovebar, color= color.red,   textcolor = color.white, transp = 0, size = size.tiny)\n\nbarcolor(barbuy  ? color.green : na)\nbarcolor(barsell ? color.red   : na)\n\n// --- NOVA LÓGICA DE ENTRADA (RISCO NEON) ---\n\n// Definindo cores Neon\nneon_green = #39ff14\nneon_red   = #ff073a\n\n// Verifica se o candle ANTERIOR foi um sinal. \n// Se buy[1] for verdadeiro, estamos no início do candle de entrada.\nentrada_compra = buy[1]\nentrada_venda  = sell[1]\n\n// Plota o \"Risco\" na abertura (open) do candle atual se o anterior foi sinal\n// Usamos o caractere \"—\" (travessão) para simular o risco, ou uma Cruz para marcar o preço exato\nplotchar(entrada_compra ? open : na, title=\"Risco Entrada Compra\", location=location.absolute, char=\"—\", color=neon_green, size=size.normal, text=\"ENTRY\", textcolor=neon_green)\nplotchar(entrada_venda ? open : na,  title=\"Risco Entrada Venda\",  location=location.absolute, char=\"—\", color=neon_red,   size=size.normal, text=\"ENTRY\", textcolor=neon_red)\n\n// Se preferir uma marcação mais precisa no preço (bolinha ou cruz), descomente as linhas abaixo:\n// plot(entrada_compra ? open : na, style=plot.style_cross, linewidth=3, color=neon_green, offset=0)\n// plot(entrada_venda ? open : na, style=plot.style_cross, linewidth=3, color=neon_red, offset=0)\n\n\n// --- ALERTAS ---\n\n// Alertas originais (disparam no fechamento da vela de sinal)\nalertcondition(buy,  \"UT Long Signal\",  \"UT Long Signal\")\nalertcondition(sell, \"UT Short Signal\", \"UT Short Signal\")\n\n// NOVOS ALERTAS DE ENTRADA (Disparam na abertura da vela onde aparece o risco)\nalertcondition(entrada_compra, \"ENTRADA COMPRA\", \"Entrar Comprado AGORA (Risco Verde)\")\nalertcondition(entrada_venda,  \"ENTRADA VENDA\",  \"Entrar Vendido AGORA (Risco Vermelho)\")",
    "params": {},
    "created_at": "2026-01-05T12:06:37.160066",
    "updated_at": "2026-01-05T12:06:37.160076"
  }
}